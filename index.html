<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>anima tek</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bitcount+Grid+Single+Ink:wght@100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="index.css">
</head>
<body class="terminal">
  <main>
    <!-- Terminal code -->
    <div class="phase terminal-phase fade-in"></div>

    <!-- Centered image -->
    <div class="terminal-image">
      <img src="plus175speed.gif" alt="Centered Image" width="200vw" height="200vw">
    </div>

    <!-- Final passage -->
    <div class="phase final-phase final-text">
      Youth and pleasure are vanity .. and times permits us miserable mortals, puffed up with emptiness, thus to wander about, until finally, coming to a tardy consciousness of our sins, we shall learn to know ourselves.<br><br>

      I have taken pride in others, never in myself, and however insignificant I may have been, I have always been still less important in my own judgment.<br><br>

      My style, as many claimed, was clear and forcible; but to me it seemed weak and obscure.<br><br>

      For habit and play has almost the potency of <input type="text" class="blank" maxlength="6" placeholder="..." autofocus> itself.
      <img src="plus175speed.gif" alt="Centered Image" width="25vw" height="25vw">
    </div>
  </main>

  <script>
    const terminal = document.querySelector('.terminal-phase');
    const finalText = document.querySelector('.final-phase');
    const body = document.body;
    const terminalImage = document.querySelector('.terminal-image');

    // escaped HTML to show in terminal
    const source = [
      { text: 'let lipstick_black = "smeared"; // calluses', red: false },
      { text: 'if (eyes.slurred) { alert("feeling sick"); } const ', red: false },
      { text: 'kiss', red: true },
      { text: ' = "on_your_lovely_lips"; while..(children.of_sin) { console.log("we are"); }', red: false },
      { text: 'let lipstick_black = "smeared"; // calluses', red: false },
      { text: 'if (eyes.slurred) { alert("feeling sick"); }', red: false },
      { text: 'const kiss = "on_your_lovely_lips";', red: false },
    ];

    function runAnimation() {
      terminal.innerHTML = "";
      body.classList.remove('clean');
      body.classList.add('terminal');
      finalText.classList.remove('show');
      terminal.style.display = "block";
      terminal.style.opacity = "1";
      terminalImage.style.opacity = "1";

      // animate char by char
      let delay = 0;
      source.forEach(segment => {
        segment.text.split("").forEach(ch => {
          const span = document.createElement('span');
          span.textContent = ch;
          if(segment.red) span.style.color = 'red';
          span.style.animation = "fadeChar 0.02s forwards";
          span.style.animationDelay = `${delay * 0.01}s`;
          terminal.appendChild(span);
          delay++;
        });
      });

      const totalTime = delay * 8 + 2000;
      setTimeout(() => {
        terminal.style.opacity = "0";
        terminalImage.style.opacity = "0"; // fade out image with terminal
        setTimeout(() => {
          terminal.style.display = "none";
          terminalImage.style.display = "none";
          body.classList.remove('terminal');
          body.classList.add('clean');
          finalText.classList.add('show');
        }, 1000);
      }, totalTime);
    }

    window.addEventListener('load', runAnimation);
  </script>
</body>
</html>
